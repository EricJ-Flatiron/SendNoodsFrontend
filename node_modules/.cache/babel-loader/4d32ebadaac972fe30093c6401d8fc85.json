{"ast":null,"code":"var _jsxFileName = \"/Users/ENJohnson/Development/code/Module5/SendNoods/frontend/src/components/CheckoutForm.js\";\nimport React from 'react';\nimport { useStripe, useElements, CardElement } from '@stripe/react-stripe-js';\nimport { useHistory } from \"react-router-dom\"; // import CardSection from './CardSection';\n\nexport default function CheckoutForm(props) {\n  const stripe = useStripe();\n  const elements = useElements();\n  const user = props.user;\n  const history = useHistory();\n  const cardStyle = {\n    style: {\n      base: {\n        color: \"#32325d\",\n        fontFamily: 'Arial, sans-serif',\n        fontSmoothing: \"antialiased\",\n        fontSize: \"16px\",\n        \"::placeholder\": {\n          color: \"#32325d\"\n        }\n      },\n      invalid: {\n        color: \"#fa755a\",\n        iconColor: \"#fa755a\"\n      }\n    }\n  };\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n\n    if (!stripe || !elements) {\n      return;\n    }\n\n    fetch(\"http://localhost:3001/payment\", {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${props.token}`\n      }\n    }).then(res => res.json()).then(secretObj => {\n      // console.log(secretObj.clientSecret)\n      stripe.confirmCardPayment(secretObj.clientSecret, {\n        payment_method: {\n          card: elements.getElement(CardElement),\n          billing_details: {\n            name: `${user.firstName} ${user.lastName}`\n          }\n        }\n      });\n      history.push(\"/profile\");\n    }); // if (result.error) {\n    //   console.log(result.error.message);\n    // } else {\n    //   if (result.paymentIntent.status === 'succeeded') {\n    //   }\n    // }\n  };\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    id: \"payment-form\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CardElement, {\n    id: \"card-element\",\n    options: cardStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    id: \"pay-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, \"Pay\"));\n}","map":{"version":3,"sources":["/Users/ENJohnson/Development/code/Module5/SendNoods/frontend/src/components/CheckoutForm.js"],"names":["React","useStripe","useElements","CardElement","useHistory","CheckoutForm","props","stripe","elements","user","history","cardStyle","style","base","color","fontFamily","fontSmoothing","fontSize","invalid","iconColor","handleSubmit","event","preventDefault","fetch","method","headers","Authorization","token","then","res","json","secretObj","confirmCardPayment","clientSecret","payment_method","card","getElement","billing_details","name","firstName","lastName","push"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,SAAR,EAAmBC,WAAnB,EAAgCC,WAAhC,QAAkD,yBAAlD;AACA,SAASC,UAAT,QAA2B,kBAA3B,C,CACA;;AAEA,eAAe,SAASC,YAAT,CAAsBC,KAAtB,EAA6B;AAC1C,QAAMC,MAAM,GAAGN,SAAS,EAAxB;AACA,QAAMO,QAAQ,GAAGN,WAAW,EAA5B;AACA,QAAMO,IAAI,GAAGH,KAAK,CAACG,IAAnB;AACA,QAAMC,OAAO,GAAGN,UAAU,EAA1B;AAEA,QAAMO,SAAS,GAAG;AAChBC,IAAAA,KAAK,EAAE;AACLC,MAAAA,IAAI,EAAE;AACJC,QAAAA,KAAK,EAAE,SADH;AAEJC,QAAAA,UAAU,EAAE,mBAFR;AAGJC,QAAAA,aAAa,EAAE,aAHX;AAIJC,QAAAA,QAAQ,EAAE,MAJN;AAKJ,yBAAiB;AACfH,UAAAA,KAAK,EAAE;AADQ;AALb,OADD;AAULI,MAAAA,OAAO,EAAE;AACPJ,QAAAA,KAAK,EAAE,SADA;AAEPK,QAAAA,SAAS,EAAE;AAFJ;AAVJ;AADS,GAAlB;;AAkBA,QAAMC,YAAY,GAAG,MAAOC,KAAP,IAAiB;AACpCA,IAAAA,KAAK,CAACC,cAAN;;AAEA,QAAI,CAACf,MAAD,IAAW,CAACC,QAAhB,EAA0B;AACxB;AACD;;AAEDe,IAAAA,KAAK,CAAC,+BAAD,EAAkC;AACrCC,MAAAA,MAAM,EAAE,MAD6B;AAErCC,MAAAA,OAAO,EAAE;AACP,wBAAiB,kBADV;AAEPC,QAAAA,aAAa,EAAG,UAASpB,KAAK,CAACqB,KAAM;AAF9B;AAF4B,KAAlC,CAAL,CAOCC,IAPD,CAOMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAPb,EAQCF,IARD,CAQMG,SAAS,IAAI;AACjB;AACAxB,MAAAA,MAAM,CAACyB,kBAAP,CAA2BD,SAAS,CAACE,YAArC,EAAoD;AAClDC,QAAAA,cAAc,EAAE;AACdC,UAAAA,IAAI,EAAE3B,QAAQ,CAAC4B,UAAT,CAAoBjC,WAApB,CADQ;AAEdkC,UAAAA,eAAe,EAAE;AACfC,YAAAA,IAAI,EAAG,GAAE7B,IAAI,CAAC8B,SAAU,IAAG9B,IAAI,CAAC+B,QAAS;AAD1B;AAFH;AADkC,OAApD;AAQA9B,MAAAA,OAAO,CAAC+B,IAAR,CAAa,UAAb;AACD,KAnBD,EAPoC,CA4BpC;AACA;AACA;AACA;AACA;AACA;AACD,GAlCD;;AAoCA,sBACE;AAAM,IAAA,EAAE,EAAC,cAAT;AAAwB,IAAA,QAAQ,EAAErB,YAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD;AAAa,IAAA,EAAE,EAAC,cAAhB;AAA+B,IAAA,OAAO,EAAET,SAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAQ,IAAA,EAAE,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAFF,CADF;AAMD","sourcesContent":["import React from 'react';\nimport {useStripe, useElements, CardElement} from '@stripe/react-stripe-js';\nimport { useHistory } from \"react-router-dom\";\n// import CardSection from './CardSection';\n\nexport default function CheckoutForm(props) {\n  const stripe = useStripe();\n  const elements = useElements();\n  const user = props.user\n  const history = useHistory();\n\n  const cardStyle = {\n    style: {\n      base: {\n        color: \"#32325d\",\n        fontFamily: 'Arial, sans-serif',\n        fontSmoothing: \"antialiased\",\n        fontSize: \"16px\",\n        \"::placeholder\": {\n          color: \"#32325d\"\n        }\n      },\n      invalid: {\n        color: \"#fa755a\",\n        iconColor: \"#fa755a\"\n      }\n    }\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    if (!stripe || !elements) {\n      return;\n    }\n\n    fetch(\"http://localhost:3001/payment\", {\n      method: \"POST\",\n      headers: {\n        'Content-Type' : 'application/json',\n        Authorization: `Bearer ${props.token}`\n      }\n    })\n    .then(res => res.json())\n    .then(secretObj => {\n      // console.log(secretObj.clientSecret)\n      stripe.confirmCardPayment( secretObj.clientSecret , {\n        payment_method: {\n          card: elements.getElement(CardElement),\n          billing_details: {\n            name: `${user.firstName} ${user.lastName}`,\n          },\n        }\n      });\n      history.push(\"/profile\");\n    })\n\n    // if (result.error) {\n    //   console.log(result.error.message);\n    // } else {\n    //   if (result.paymentIntent.status === 'succeeded') {\n    //   }\n    // }\n  };\n\n  return (\n    <form id=\"payment-form\" onSubmit={handleSubmit}>\n      <CardElement id=\"card-element\" options={cardStyle}  />\n      <button id=\"pay-button\" >Pay</button>\n    </form>\n  );\n}"]},"metadata":{},"sourceType":"module"}